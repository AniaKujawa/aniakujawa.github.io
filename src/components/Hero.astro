---
import backgroundVideo from "../assets/background.mp4";
import placeholderImage from "../assets/background.png";
---

<section
  class="relative min-h-screen flex items-center justify-center overflow-hidden"
>
  <!-- Video Background -->
  <div
    class="absolute inset-0 w-full h-full bg-gradient-to-r from-blue-400 to-teal-400"
  >
    <img
      src={placeholderImage.src}
      alt="Journey image"
      class="object-cover w-full h-full absolute inset-0 z10"
      id="placeholder-image"
    />
    <video
      class="object-cover w-full h-full"
      autoplay
      loop
      muted
      playsinline
      onloadeddata="document.getElementById('placeholder-image').style.display='none';"
    >
      <source src={backgroundVideo} type="video/mp4" />
    </video>
    <!-- Dark overlay -->
    <div class="absolute inset-0 bg-black/50"></div>
  </div>

  <!-- Content -->
  <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-32">
    <h1 class="text-5xl md:text-7xl font-bold mb-6 text-white text-center">
      The journey into
      <span
        class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-400"
      >
        web development
      </span>
    </h1>
    <div
      id="typing-text"
      class="absolute right-4 sm:right-6 lg:right-8 text-2xl md:text-3xl text-blue-200 font-cursive"
    >
    </div>
  </div>
</section>

<style>
  .font-cursive {
    font-family: "Dancing Script", cursive;
  }
</style>

<script>
  const text = "by Anna Kujawa";
  const typingElement = document.getElementById("typing-text");

  function typeText() {
    if (!typingElement) return;

    let index = 0;
    typingElement.textContent = ""; // Clear existing text

    function type() {
      if (index < text.length && typingElement) {
        typingElement.textContent += text.charAt(index);
        index++;
        setTimeout(type, 100);
      }
    }

    type();
  }

  // Create Intersection Observer
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          typeText(); // Start typing when element is visible
        }
      });
    },
    {
      threshold: 0.5, // Trigger when 50% of the element is visible
    }
  );

  // Start observing the typing element
  if (typingElement) {
    observer.observe(typingElement);
  }
</script>
